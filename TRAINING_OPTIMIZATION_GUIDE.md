# 軍儀AI 学習最適化ガイド

## 📊 現状分析（あなたの環境）

**ハードウェア:**
- GPU: NVIDIA GeForce RTX 3060 Ti
- VRAM: 8GB
- CUDA: 12.0
- Driver: 528.24

**現在の学習状況（テストモード）:**
```
1イテレーション = 10ゲーム = 133秒
GPU使用率: 50% ← 改善の余地あり！
VRAM使用率: 31% (2.5GB/8GB) ← 大幅に余っている！
```

---

## 🎯 強いAIに必要なゲーム数

| レベル | 必要ゲーム数 | 現在の設定での所要時間 | 最適化後の所要時間 |
|--------|-------------|----------------------|------------------|
| 基本的なルール理解 | ~1,000 | 約4時間 | 約1時間 |
| 初心者レベル | ~10,000 | 約37時間 | 約10時間 |
| 中級レベル | ~50,000 | 約8日 | 約2日 |
| 上級レベル | ~200,000 | 約30日 | 約8日 |
| プロレベル | ~1,000,000+ | 約150日 | 約40日 |

**参考: AlphaZeroの実績:**
- AlphaGo Zero: 500万ゲーム（TPU×64で3日）
- AlphaZero チェス: 4400万ゲーム（TPU×5000で9時間）

---

## 🚀 最適化による効率向上

### 現在の設定 vs 最適化設定

| 項目 | 現在（テスト） | 最適化版 | 向上率 |
|------|--------------|---------|--------|
| 並行ゲーム数 | 16 | 64 | 4倍 |
| MCTSシミュレーション | 50 | 100 | 2倍（品質向上） |
| バッチサイズ | 256 | 512 | 2倍 |
| ゲーム/イテレーション | 10 | 50 | 5倍 |
| FP16（半精度） | 未使用 | 使用 | 〜2倍高速 |
| 予想GPU使用率 | 50% | 80-90% | 〜1.7倍 |

### 予想される効率向上
- **1時間あたりのゲーム数**: 270 → 約1,000+
- **1週間での総ゲーム数**: 45,500 → 約170,000+

---

## 📋 使用方法

### 1. 最適化モードで学習開始（推奨）
```powershell
cd c:\Users\iamzo\Documents\GUNGI\Gungi
.\.venv\Scripts\Activate.ps1
python scripts/train.py --optimized
```

### 2. 既存の学習から継続（最適化モードに切り替え）
```powershell
python scripts/train.py --optimized --resume
```

### 3. カスタム設定
```powershell
# 1週間の本格学習（推奨）
python scripts/train.py --optimized --iterations 1000 --games 100

# より強いAIを目指す場合（MCTSを増やす）
python scripts/train.py --optimized --mcts-sims 200 --iterations 500
```

---

## ⚙️ モード別設定詳細

### テストモード（--test）[デフォルト]
```
目的: 動作確認、短時間テスト
並行ゲーム: 16
MCTS: 50
ゲーム/イテレーション: 10
イテレーション: 50
総ゲーム数: 500
所要時間: 約2時間
```

### 最適化モード（--optimized）[推奨]
```
目的: GPU最大効率での学習
並行ゲーム: 64
MCTS: 100
ゲーム/イテレーション: 50
イテレーション: 200
総ゲーム数: 10,000
所要時間: 約10時間
FP16: 有効
```

### 本番モード（--full）
```
目的: 最高品質の学習
並行ゲーム: 16
MCTS: 200
ゲーム/イテレーション: 100
イテレーション: 100
総ゲーム数: 10,000
所要時間: 約20時間
```

---

## 🔧 1週間学習の推奨設定

```powershell
# 1週間で約15万〜20万ゲーム
python scripts/train.py --optimized --iterations 2000 --games 100 --mcts-sims 100
```

**期待される結果:**
- 総ゲーム数: 約200,000
- AIレベル: 中級〜上級
- GPU使用率: 80-90%
- VRAM使用率: 60-70%

---

## 📈 学習の進捗確認

学習中は以下のメトリクスを確認：

1. **Policy Loss**: 下がり続けるべき（4.0以下が目標）
2. **Value Loss**: 下がり続けるべき（0.1以下が目標）
3. **勝率バランス**: BLACK≒WHITE が理想

進捗はチェックポイントで保存されるので、いつでも中断・再開可能：
```powershell
# 中断: Ctrl+C
# 再開:
python scripts/train.py --optimized --resume
```

---

## 💡 追加の最適化Tips

1. **Windowsの電源設定**: 「高パフォーマンス」に変更
2. **不要なアプリを閉じる**: 特にブラウザ、Discord等
3. **夜間学習**: PCを使わない時間帯に学習を回す
4. **温度監視**: GPU温度が80℃以上なら冷却を検討

---

## 🎮 学習済みモデルのテスト

学習後、AIの強さをテスト：
```powershell
# サーバー起動
python run_server.py

# ブラウザで http://localhost:8000 にアクセス
```
